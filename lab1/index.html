<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
<body>
    <div id="container" tabindex = "0"
        class = "blockquto text-nowrap">   
    </div>
    <button onclick="timerAll()" class="btn btn-secondary">
    Run Again
    </button>
</body>
<script>
    var container = document.getElementById('container');
    var rand_func = add_new_chars(); // get random
    window.onload = function(){
       container.textContent = rand_func + container.textContent.substring(1);
    }
    if(container.textContent.length == 0){
        window.onload = timerAll();
    }

    window.addEventListener("keyup", function(e) {
        console.log(e.key);
        var firstChar = container.textContent.charAt(0); // 取得第一個字元
        if(e.key == firstChar && container.textContent.length > 0){ 
            container.textContent = container.textContent.substring(1);//delete first char
            rand_func.length--;
        } else if (container.textContent.length == 0) {
            container.textContent += add_new_chars();
            timerAll();
        } else {
            container.textContent = container.textContent;
        } 
    }
    );

    function add_new_chars(){
        var numsize = Math.floor(Math.random() * 3) + 1; // random number between 0 and 2, so plus 1
        var string_add = "";
        for (var i = 0; i < numsize; i++) {
        var numchars = Math.floor(Math.random() * 26) + 65; // 產生 A 到 Z 的亂數字元
        string_add += String.fromCharCode(numchars);//轉換數字到英文
        }
        return string_add;
    }
    
    function timerAll() {
        alert("是否重新載入?");
        container.textContent = rand_func + container.textContent.substring(1);
        window.addEventListener("keyup", function(e) {
            console.log(e.key);
            firstChar = container.textContent.charAt(0); // 取得第一個字元
            if(e.key == firstChar && container.textContent.length > 0){ 
                rand_func.length--;
            } else if (container.textContent.length == 0) {
                container.textContent += add_new_chars();
                timerAll();
            } else {
                container.textContent = container.textContent;
            } 
        });
    }


</script>